<html>
  <head>
    <title>{{ title }}</title>
    <script src="https://apis.google.com/js/client.js"></script>
    <script>
        function authAndSend() {
            //filling out config which contains the client id and the services we can access
            var config = {
                'client_id': '52450915676-vbodirphpocn2lr6v7dscpp100o2pfn3.apps.googleusercontent.com',
                'scope': [
                    'https://www.googleapis.com/auth/userinfo.profile',
                    'https://www.googleapis.com/auth/glass.timeline',
                    'https://www.googleapis.com/auth/glass.location'
                ]
            };

            //authenticating and getting token


            gapi.auth.authorize(config, function () {
                console.log("getting token inside authorize")
                accessToken = gapi.auth.getToken().access_token; 
                console.log(accessToken)
                //creating items being pushed to glass and making a json
                console.log('creating params for HTTP Request to insert to glass')
                var params = {};
                params.text =  'Hello ,Neil Its working.';
                params.notification = {};
                params.notification.level = 'DEFAULT';
                var data = JSON.stringify(params);

                //specifying HTTP specifics and having POST method which inserts to timeline
                var options = {
                host: 'www.googleapis.com',
                path: '/mirror/v1/timeline',
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                  'Content-Length': data.length,
                  'Authorization': 'Bearer ' + accessToken
                }
              }
              //se
              post_req.write();
              post_req.end();
            });



        }

</script>
  </head>
  <body>
    <h1>{{ title }}</h1>
    <button onclick="authAndSend();">Send to glass</button>
  </body>
</html>